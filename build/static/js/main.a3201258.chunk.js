(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{103:function(e,t,c){},109:function(e,t,c){},110:function(e,t,c){},112:function(e,t,c){"use strict";c.r(t);var a=c(5),s=c.n(a),n=c(82),i=c.n(n),r=(c(96),c(15)),o=(c(97),c(136)),j=c(137),d=c(85),l=c.n(d),b=c(86),h=c.n(b),u=c(65),O=c.n(u),m=c(87),p=c.n(m),x=(c(98),c(63)),f=c(68),v=(c(100),c(114),c(113),f.a.initializeApp({apiKey:"AIzaSyB1j2bG1LoAxC7C66oSMWa1JDZfGr_MthU",authDomain:"whatsapp-clone-8418c.firebaseapp.com",projectId:"whatsapp-clone-8418c",storageBucket:"whatsapp-clone-8418c.appspot.com",messagingSenderId:"429630209747",appId:"1:429630209747:web:2eaf7fc8f79e016b431e26",measurementId:"G-V7Z7EJKHL3"}).firestore()),g=f.a.auth(),S=new f.a.auth.GoogleAuthProvider,N=v,_=(c(103),c(7)),w={display:"flex",padding:"2px 20px",cursor:"pointer",borderBottom:"0.3px solid #cacaca7c"};var y=function(e){var t,c=e.id,s=e.name,n=e.addnewchat,i=Object(a.useState)(""),j=Object(r.a)(i,2),d=j[0],l=j[1],b=Object(a.useState)([]),h=Object(r.a)(b,2),u=h[0],O=h[1];return Object(a.useEffect)((function(){c&&N.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return O(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(a.useEffect)((function(){l(Math.floor(5004*Math.random()))}),[]),n?Object(_.jsx)("div",{classname:"sidebarchat",onClick:function(){var e=prompt(" Please enter name for chat");e&&N.collection("rooms").add({name:e})},style:w,children:Object(_.jsx)("h2",{children:"Add new chat"})}):Object(_.jsx)(x.b,{to:"/rooms/".concat(c),children:Object(_.jsxs)("div",{className:"sidebarchat",children:[Object(_.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg")}),Object(_.jsxs)("div",{className:"sidebarchat_info",children:[Object(_.jsx)("h2",{children:s}),Object(_.jsx)("p",{children:null===(t=u[0])||void 0===t?void 0:t.message})]})]})})},C=Object(a.createContext)(),I=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(_.jsx)(C.Provider,{value:Object(a.useReducer)(t,c),children:s})},E=function(){return Object(a.useContext)(C)};var D=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1],n=E(),i=Object(r.a)(n,2),d=i[0].user;return i[1],Object(a.useEffect)((function(){var e=N.collection("rooms").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(_.jsxs)("div",{className:"side",children:[Object(_.jsxs)("div",{className:"sidebar_header",children:[Object(_.jsx)(o.a,{src:null===d||void 0===d?void 0:d.photoURL}),Object(_.jsxs)("div",{className:"header_right",children:[Object(_.jsx)(j.a,{children:Object(_.jsx)(l.a,{})}),Object(_.jsx)(j.a,{children:Object(_.jsx)(h.a,{})}),Object(_.jsx)(j.a,{children:Object(_.jsx)(O.a,{})})]})]}),Object(_.jsx)("div",{className:"sidebar_search",children:Object(_.jsxs)("div",{className:"search__container",children:[Object(_.jsx)(p.a,{}),Object(_.jsx)("input",{type:"text",placeholder:"Search for a contact or group"})]})}),Object(_.jsxs)("div",{className:"sidebar_chats",children:[Object(_.jsx)(y,{addnewchat:!0}),c.map((function(e){return Object(_.jsx)(y,{id:e.id,name:e.data.name},e.id)}))]})]})},B=c(130),L=c(131),M=c(132),T=c(133),k=c(22),A=(c(109),c(34));var P=function(){var e,t,c=Object(a.useState)(""),s=Object(r.a)(c,2),n=s[0],i=s[1],d=Object(a.useState)(""),l=Object(r.a)(d,2),b=l[0],h=l[1],u=Object(k.f)().roomId,m=Object(a.useState)(""),p=Object(r.a)(m,2),x=p[0],f=p[1],v=Object(a.useState)([]),g=Object(r.a)(v,2),S=g[0],w=g[1],y=E(),C=Object(r.a)(y,2),I=C[0].user;return C[1],Object(a.useEffect)((function(){u&&N.collection("rooms").doc(u).onSnapshot((function(e){return f(e.data().name)})),N.collection("rooms").doc(u).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return w(e.docs.map((function(e){return e.data()})))}))}),[u]),Object(a.useEffect)((function(){h(Math.floor(5004*Math.random()))}),[u]),Object(_.jsxs)("div",{className:"chat",children:[Object(_.jsxs)("div",{className:"chat_header",children:[Object(_.jsx)(o.a,{alt:"vvh",src:"https://avatars.dicebear.com/api/human/".concat(b,".svg"),sx:{width:36,height:36}}),Object(_.jsxs)("div",{className:"header_info",children:[Object(_.jsx)("h3",{children:x}),Object(_.jsxs)("p",{children:["Last seen at"," ",new Date(null===(e=S[S.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(_.jsxs)("div",{className:"header_right",children:[Object(_.jsx)(j.a,{children:Object(_.jsx)(B.a,{})}),Object(_.jsx)(j.a,{children:Object(_.jsx)(L.a,{})}),Object(_.jsx)(j.a,{children:Object(_.jsx)(O.a,{})})]})]}),Object(_.jsx)("div",{className:"chat_body",children:S.map((function(e){var t;return Object(_.jsxs)("p",{className:"chat_mssg ".concat(e.name===I.displayName&&"chat_receiver"),children:[Object(_.jsx)("span",{className:"chat_name",children:e.name}),e.message,Object(_.jsx)("span",{className:"timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString().substring(17,22)})]})}))}),Object(_.jsxs)("div",{className:"chat_footer",children:[Object(_.jsx)(M.a,{}),Object(_.jsxs)("form",{children:[Object(_.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Type a message"}),Object(_.jsx)("button",{onClick:function(e){e.preventDefault(),console.log(n),N.collection("rooms").doc(u).collection("messages").add({message:n,name:I.displayName,timestamp:A.a.firestore.FieldValue.serverTimestamp()}),i("")},type:"submit",children:"Send message"})]}),Object(_.jsx)(T.a,{})]})]})},F=c(138),U=(c(110),c(78)),G="SET_USER",J=function(e,t){return console.log(t),t.type===G?Object(U.a)(Object(U.a)({},e),{},{user:t.user}):e},R=c.p+"static/media/Wa_logo.4a6ec693.png";var W=function(){var e=E(),t=Object(r.a)(e,2),c=(t[0].login,t[1]);return Object(_.jsx)("div",{className:"Login",children:Object(_.jsxs)("div",{className:"login_cont",children:[Object(_.jsx)("img",{className:"wa_logo",src:R,alt:"wa_logo"}),Object(_.jsx)("div",{className:"login_text",children:Object(_.jsx)("h1",{children:"Sign in to whatsapp"})}),Object(_.jsx)(F.a,{type:"submit",onClick:function(){g.signInWithPopup(S).then((function(e){c({type:G,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign in with google"})]})})};var z=function(){var e=E(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(_.jsx)("div",{className:"App",children:c?Object(_.jsx)("div",{className:"app__body",children:Object(_.jsxs)(x.a,{children:[Object(_.jsx)(D,{}),Object(_.jsxs)(k.c,{children:[Object(_.jsx)(k.a,{path:"/rooms/:roomId",children:Object(_.jsx)(P,{})}),Object(_.jsx)(k.a,{path:"/",children:Object(_.jsx)(P,{})})]})]})}):Object(_.jsx)(W,{})})},K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,139)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))};i.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(I,{initialState:{user:null},reducer:J,children:Object(_.jsx)(z,{})})}),document.getElementById("root")),K()},96:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){}},[[112,1,2]]]);
//# sourceMappingURL=main.a3201258.chunk.js.map